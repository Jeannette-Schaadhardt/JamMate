<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/headMetaData') %>
</head>
<body>
    <%- include('partials/border_start') %>
    <%- include('partials/header', {user: loggedIn}) %>

    <h1>Musician Feed</h1>
        <% if (loggedIn) { %>
            <%- include('partials/post_form', {user: user}) %>
            <%- include('partials/ad_form', {user: user}) %>

        <% } else {%>
            <button type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-link btn-lg" data-mdb-ripple-color="dark">
                <!--<i class="fas fa-share me-2"></i>Create Post -->
                <a class="nav-link" href="/login">Create Post</a>
            </button>
        <% } %>
        <div class="container text-center">
            <div class="row">
              <div class="col-2">
                <% try { %>
                    <%- include('partials/ad', { ad_data: ads }) %>
                    <% } catch { %>
                    <% } %>
              </div>

              <div class="col">
                <table class="table table-hover table-forum text-center">
                    <thead class="border">
                        <tr class="inline-div">
                            <h3>Top 10 Posts</h3>
                        </tr>
                    </thead>
                <tbody class="container" >
                    <% if (posts.length > 0 ) { %>
                        <% for(let i = 0; i < Math.min(9, posts.length); i++) { %>
                            <tr>
                            <%- include('partials/post', {user: loggedIn, post_data: posts[i], userData: user}) %>
                            </tr>
                        <% } %>
                    <% } else { %>
                        <%- include('partials/noPosts') %>
                        <% } %>
                </tbody>
                </table>
              </div>

            </div>
          </div>


    <%- include('partials/border_end') %>
</body>

<footer>
    <%- include('partials/footer') %>
</footer>
</html>